environment:
  matrix:
    ###########################################################################
    # Build 64 bit version using clang-cl backed by MSVC 2017
    # -------------------------------------------------------------------------
    # Note that building against MSVC 2017 is only supported with a newer clang
    ###########################################################################
    - APPVEYOR_BUILD_WORKER_IMAGE: Visual Studio 2017
      MSVC_SETUP_PATH: C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\VC\Auxiliary\Build\vcvarsall.bat
      MSVC_SETUP_ARG: x64
      USE_CLANG: ON
      INSTALL_NEW_CLANG: ON
      CLANG_URL: http://llvm.org/pre-releases/win-snapshots/LLVM-5.0.0-r301646-win64.exe
version: 1.0.{build}
build_script:
- echo %configuration%

  - IF DEFINED USE_CLANG set PATH="C:\Program Files\LLVM\bin";%PATH%
  - IF DEFINED USE_CLANG clang-cl -v
  - IF DEFINED USE_CLANG set CMAKE_EXTRA_OPTIONS=-DCMAKE_C_COMPILER=clang-cl.exe -DCMAKE_CXX_COMPILER=clang-cl.exe
before_build:
- call "%MSVC_SETUP_PATH%" %MSVC_SETUP_ARG%
build:
  verbosity: minimal
